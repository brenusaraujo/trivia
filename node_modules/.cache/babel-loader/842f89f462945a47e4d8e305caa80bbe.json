{"ast":null,"code":"var _jsxFileName = \"/Users/brenoaraujo/Projetos Trybe/sd-022-b-project-trivia-react-redux/src/pages/Game.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport getTriviaApi from '../services/triviaAPI';\nimport Questions from '../components/Questions';\nimport Header from '../components/Header';\nimport { assertionAction, scoreAction } from '../redux/actions';\n\nclass Game extends Component {\n  constructor() {\n    super();\n\n    this.questionsExecute = async () => {\n      const {\n        history\n      } = this.props;\n      const result = await getTriviaApi(localStorage.getItem('token'));\n      const error = 3;\n      if (result.response_code === error) history.push('/');else this.setState({\n        questions: result.results\n      });\n    };\n\n    this.handleScore = (difficulty, _ref) => {\n      let {\n        target\n      } = _ref;\n      const {\n        scoreDispatch\n      } = this.props;\n      const timer = Number(document.getElementById('timer').innerHTML);\n      const summary = {\n        hard: 3,\n        medium: 2,\n        easy: 1\n      };\n      const CONSTANT = 10;\n      const equation = CONSTANT + timer * summary[difficulty];\n\n      if (target.className === 'correct') {\n        scoreDispatch(equation);\n      }\n    };\n\n    this.state = {\n      questions: [],\n      index: 0,\n      assertions: 0\n    };\n  }\n\n  componentDidMount() {\n    this.questionsExecute();\n  }\n\n  render() {\n    const {\n      questions,\n      index\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }\n    }), questions.length !== 0 ? /*#__PURE__*/React.createElement(Questions, {\n      question: questions[index],\n      handleScore: this.handleScore,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 27\n      }\n    }) : /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, \"Carregando\"));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  gravatarEmail: state.player.gravatarEmail,\n  name: state.player.name,\n  score: state.player.score\n});\n\nconst mapDispatchToProps = dispatch => ({\n  scoreDispatch: payload => dispatch(scoreAction(payload)),\n  assertionDispatch: payload => dispatch(assertionAction(payload))\n});\n\nGame.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired,\n  scoreDispatch: PropTypes.func.isRequired\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Game);","map":{"version":3,"sources":["/Users/brenoaraujo/Projetos Trybe/sd-022-b-project-trivia-react-redux/src/pages/Game.js"],"names":["React","Component","PropTypes","connect","getTriviaApi","Questions","Header","assertionAction","scoreAction","Game","constructor","questionsExecute","history","props","result","localStorage","getItem","error","response_code","push","setState","questions","results","handleScore","difficulty","target","scoreDispatch","timer","Number","document","getElementById","innerHTML","summary","hard","medium","easy","CONSTANT","equation","className","state","index","assertions","componentDidMount","render","length","mapStateToProps","gravatarEmail","player","name","score","mapDispatchToProps","dispatch","payload","assertionDispatch","propTypes","shape","func","isRequired"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport getTriviaApi from '../services/triviaAPI';\nimport Questions from '../components/Questions';\nimport Header from '../components/Header';\nimport { assertionAction, scoreAction } from '../redux/actions';\n\nclass Game extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      questions: [],\n      index: 0,\n      assertions: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.questionsExecute();\n  }\n\n  questionsExecute = async () => {\n    const { history } = this.props;\n    const result = await getTriviaApi(localStorage.getItem('token'));\n    const error = 3;\n    if (result.response_code === error) history.push('/');\n    else this.setState({ questions: result.results });\n  }\n\n  handleScore = (difficulty, { target }) => {\n    const { scoreDispatch } = this.props;\n    const timer = Number(document.getElementById('timer').innerHTML);\n    const summary = {\n      hard: 3,\n      medium: 2,\n      easy: 1,\n    };\n    const CONSTANT = 10;\n    const equation = CONSTANT + (timer * summary[difficulty]);\n    if (target.className === 'correct') {\n      scoreDispatch(equation);\n    }\n  }\n\n  render() {\n    const { questions, index } = this.state;\n\n    return (\n      <section>\n        <Header />\n        {questions\n          .length !== 0 ? <Questions\n            question={ questions[index] }\n            handleScore={ this.handleScore }\n          />\n          : <p>Carregando</p>}\n      </section>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  gravatarEmail: state.player.gravatarEmail,\n  name: state.player.name,\n  score: state.player.score,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  scoreDispatch: (payload) => dispatch(scoreAction(payload)),\n  assertionDispatch: (payload) => dispatch(assertionAction(payload)),\n});\n\nGame.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n  scoreDispatch: PropTypes.func.isRequired,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Game);\n"]},"metadata":{},"sourceType":"module"}